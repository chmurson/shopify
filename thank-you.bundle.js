webpackJsonp([3],{0:function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(){S.css("visibility","hidden"),(0,v.startOrderFetching)(E).then(u)["catch"](c).then(m).then(function(){return S.css("visibility","visible")})}function u(e){if(w())return s();if(!e.cancelled_at&&e.isPayU!==!1){var t=N[e.status];t.call()}}function s(){Shopify.Checkout.OrderStatus.addContentBox(b.createSomeError())}function c(){Shopify.Checkout.OrderStatus.addContentBox(b.createServerError())}function p(){var e=C(E);Shopify.Checkout.OrderStatus.addContentBox(b.createCreatedMessage(e)),(0,k["default"])("#navigate-to-payu").on("click",function(){window.clearTimeout(t)});var t=setTimeout(function(){location.href=e},5e3);(0,k["default"])(".step__footer__continue-btn.btn").click(function(t){t.preventDefault(),window.location.href=e})}function f(){Shopify.Checkout.OrderStatus.addContentBox(b.createRejectedMessage())}function l(){Shopify.Checkout.OrderStatus.addContentBox(b.createCompletedMessage())}function d(){Shopify.Checkout.OrderStatus.addContentBox(b.createPendingMessage())}function h(){Shopify.Checkout.OrderStatus.addContentBox(b.createCanceledMessage())}function y(){Shopify.Checkout.OrderStatus.addContentBox(b.createWaitingForConfirmationMessage())}function m(){(0,k["default"])(".page--thank-you .main__content > .section > .section__content").addClass("loaded")}function w(){var e=location.href.indexOf("?");if(e===-1)return!1;var t=k["default"].deparam(location.href.slice(e+1));return!(!t||"true"!==t.error)}function C(e){return z.BACKEND_URL+"/order-payu-start/"+e}var _,g=n(1),k=r(g),z=n(17);n(61);var v=n(47),O=n(51),b=o(O),E=Shopify.checkout.token,S=(0,k["default"])(".step__footer__continue-btn.btn");i();var N=(_={},a(_,void 0,p),a(_,v.paymentStatuses.CREATED,p),a(_,v.paymentStatuses.PENDING,d),a(_,v.paymentStatuses.WAITING_FOR_CONFIRMATION,y),a(_,v.paymentStatuses.REJECTED,f),a(_,v.paymentStatuses.CANCELED,h),a(_,v.paymentStatuses.COMPLETED,l),_)},46:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PAY_U_GATWAY="PayU",t.maxAttemptNumber=5,t.getOrderTimeoutBeforeNextAttempt=2500},47:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e){return c["default"].getJSON(p.BACKEND_URL+"/order/"+e).then(function(e){return"string"==typeof e&&(e=JSON.parse(e)),e[0]?new l(e[0]):c["default"].Deferred().reject("No order has been found")})}function i(e){return new Promise(function(t,n){function o(){return r++,r>f.maxAttemptNumber?n():void a(e).then(function(e){t(e)},function(){setTimeout(function(){return o()},f.getOrderTimeoutBeforeNextAttempt)})}var r=0;o()})}Object.defineProperty(t,"__esModule",{value:!0}),t.Order=t.paymentStatuses=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();t.getOrder=a,t.startOrderFetching=i;var s=n(1),c=o(s),p=n(17),f=n(46),l=(t.paymentStatuses={CREATED:"CREATED",COMPLETED:"COMPLETED",REJECTED:"REJECTED",CANCELED:"CANCELED",PENDING:"PENDING",WAITING_FOR_CONFIRMATION:"WAITING_FOR_CONFIRMATION"},t.Order=function(){function e(t){r(this,e),this.checkout_token=null,this.gateway=null,Object.assign(this,t)}return u(e,[{key:"isPayU",get:function(){return this.gateway===f.PAY_U_GATWAY}},{key:"status",get:function(){return this.payU?this.payU.status:void 0}}]),e}())},51:function(e,t){"use strict";function n(){return'\n    <h2 class="os-step__title error">Błąd serwera</h2>\n    <p class="error">Nie mogliśmy połączyć się z serwerem przez co nie wiemy jaki jest status płatności PayU.\n      Spróbuj za chwilę odświerzyć stronę. Możliwe, że to tylko chwilowe problemy. Jeśli problem nie ustępuje, \n      skontaktuj się z nami.\n    </p>\n    <p><a href="'+window.location.href+'">Spróbuj jeszcze raz</a></p>\n  '}function o(){var e=window.location.href.split("?")[0];return'\n    <h2 class="os-step__title error">Błąd serwera</h2>\n    <p>W trakcie przetwarzania transakcji PayU wystąpił błąd.</p>\n    <p>Kliknij <a href="'+e+'">tutaj</a>, aby spróbować jeszcze raz.</p>\n    <p>Jeśli problem nie ustąpi, skontaktuj się z nami.</p>\n  '}function r(e){return'\n    <p>Za chwilę zostaniesz przekierowany na strone PayU gdzię będziesz mógł dokonać płatności.</p>\n    <p>Jeśli tak się nie stanie, możesz się przenieść klikając <a id="navigate-to-payu" href="'+e+'">tutaj</a></p>    \n  '}function a(){return'\n    <h2 class="os-step__title error">Płatność została odrzucona</h2>\n    <p>Płatność została odrzucona, ale prawdopodobnie Twoje konto zostało obciążone. W razie wątpliwości prosimy o kontakt.</p>\n  '}function i(){return"\n    <p>Płatność za zamowienie została zakceptowana. Dziękujemy.</p>\n  "}function u(){return'\n    <h2 class="os-step__title error">Płatność została anulowana</h2>\n    <p>Płatność została anulowana, Twoje konto nie zostało obciążone. W razie wątpliwości prosimy o kontakt.</p>\n  '}function s(){return"\n    <p>Płatność wymaga potwierdzenia. W razie wątpliwości prosimy o kontakt.</p>\n  "}function c(){return"\n    <p>Płatność jest w trakcie rozliczenia.</p>\n  "}Object.defineProperty(t,"__esModule",{value:!0}),t.createServerError=n,t.createSomeError=o,t.createCreatedMessage=r,t.createRejectedMessage=a,t.createCompletedMessage=i,t.createCanceledMessage=u,t.createWaitingForConfirmationMessage=s,t.createPendingMessage=c},61:function(e,t,n){!function(t){try{var o=n(1)}catch(r){}e.exports=t(o)}(function(e){var t=function(e,t){var n={},o={"true":!0,"false":!1,"null":null};return e.replace(/\+/g," ").split("&").forEach(function(e){var r,a=e.split("="),i=decodeURIComponent(a[0]),u=n,s=0,c=i.split("]["),p=c.length-1;if(/\[/.test(c[0])&&/\]$/.test(c[p])?(c[p]=c[p].replace(/\]$/,""),c=c.shift().split("[").concat(c),p=c.length-1):p=0,2===a.length)if(r=decodeURIComponent(a[1]),t&&(r=r&&!isNaN(r)&&+r+""===r?+r:"undefined"===r?void 0:void 0!==o[r]?o[r]:r),p)for(;s<=p;s++)i=""===c[s]?u.length:c[s],u=u[i]=s<p?u[i]||(c[s+1]&&isNaN(c[s+1])?{}:[]):r;else"[object Array]"===Object.prototype.toString.call(n[i])?n[i].push(r):{}.hasOwnProperty.call(n,i)?n[i]=[n[i],r]:n[i]=r;else i&&(n[i]=t?void 0:"")}),n};return e&&(e.prototype.deparam=e.deparam=t),t})}});
//# sourceMappingURL=thank-you.bundle.js.map
webpackJsonp([3],{0:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(){(0,v.startOrderFetching)(b).then(u)["catch"](c).then(m)}function u(e){var t=C(e);if(!e.cancelled_at&&e.isPayU!==!1){var n=S[e.status];return!n||t?s():void n.call()}}function s(){Shopify.Checkout.OrderStatus.addContentBox(_.createSomeError())}function c(){Shopify.Checkout.OrderStatus.addContentBox(_.createServerError())}function p(){var e=w(b);Shopify.Checkout.OrderStatus.addContentBox(_.createCreatedMessage(e)),(0,z["default"])("#navigate-to-payu").on("click",function(){window.clearTimeout(t)});var t=setTimeout(function(){location.href=e},5e3)}function f(){Shopify.Checkout.OrderStatus.addContentBox(_.createRejectedMessage())}function l(){Shopify.Checkout.OrderStatus.addContentBox(_.createCompletedMessage())}function d(){Shopify.Checkout.OrderStatus.addContentBox(_.createPendingMessage())}function h(){Shopify.Checkout.OrderStatus.addContentBox(_.createCanceledMessage())}function y(){Shopify.Checkout.OrderStatus.addContentBox(_.createWaitingForConfirmationMessage())}function m(){(0,z["default"])(".page--thank-you .main__content > .section > .section__content").addClass("loaded")}function C(e){var t=location.href.indexOf("?");if(t===-1)return!1;var n=z["default"].deparam(location.href.slice(t+1));if(!n||"true"!==n.error)return!1;var r=parseInt(n.errorNumber);return"number"==typeof r&&!(!e.errors||!e.errors[r])}function w(e){return O.BACKEND_URL+"/order-payu-start/"+e}var g,k=n(1),z=o(k),O=n(17);n(61);var v=n(47),E=n(51),_=r(E),b=Shopify.checkout.token;i();var S=(g={},a(g,void 0,p),a(g,v.paymentStatuses.CREATED,p),a(g,v.paymentStatuses.PENDING,d),a(g,v.paymentStatuses.WAITING_FOR_CONFIRMATION,y),a(g,v.paymentStatuses.REJECTED,f),a(g,v.paymentStatuses.CANCELED,h),a(g,v.paymentStatuses.COMPLETED,l),g)},46:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PAY_U_GATWAY="PayU",t.maxAttemptNumber=5,t.getOrderTimeoutBeforeNextAttempt=2500},47:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e){return c["default"].getJSON(p.BACKEND_URL+"/order/"+e).then(function(e){return"string"==typeof e&&(e=JSON.parse(e)),e[0]?new l(e[0]):c["default"].Deferred().reject("No order has been found")})}function i(e){return new Promise(function(t,n){function r(){return o++,o>f.maxAttemptNumber?n():void a(e).then(function(e){t(e)},function(){setTimeout(function(){return r()},f.getOrderTimeoutBeforeNextAttempt)})}var o=0;r()})}Object.defineProperty(t,"__esModule",{value:!0}),t.Order=t.paymentStatuses=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.getOrder=a,t.startOrderFetching=i;var s=n(1),c=r(s),p=n(17),f=n(46),l=(t.paymentStatuses={CREATED:"CREATED",COMPLETED:"COMPLETED",REJECTED:"REJECTED",CANCELED:"CANCELED",PENDING:"PENDING",WAITING_FOR_CONFIRMATION:"WAITING_FOR_CONFIRMATION"},t.Order=function(){function e(t){o(this,e),this.checkout_token=null,this.gateway=null,Object.assign(this,t)}return u(e,[{key:"isPayU",get:function(){return this.gateway===f.PAY_U_GATWAY}},{key:"status",get:function(){return this.payU?this.payU.status:void 0}}]),e}())},51:function(e,t){"use strict";function n(){return'\n    <h2 class="os-step__title error">Błąd serwera</h2>\n    <p class="error">Nie mogliśmy połączyć się z serwerem przez co nie wiemy jaki jest status płatności PayU.\n      Spróbuj za chwilę odświerzyć stronę. Możliwe, że to tylko chwilowe problemy. Jeśli problem nie ustępuje, \n      skontaktuj się z nami.\n    </p>\n    <p><a href="'+window.location.href+'">Spróbuj jeszcze raz</a></p>\n  '}function r(){return'\n    <h2 class="os-step__title error">Błąd serwera</h2>\n    <p>W trakcie przetwarzania transakcji PayU wystąpił błąd.</p>\n    <p>Kliknij <a href="'+window.location.href+'">tutaj</a>, aby spróbować jeszcze raz.</p>\n    <p>Jeśli problem nie ustąpi, skontaktuj się z nami.</p>\n  '}function o(e){return'\n    <p>Za chwilę zostaniesz przekierowany na strone PayU gdzię będziesz mógł dokonać płatności.</p>\n    <p>Jeśli tak się nie stanie, możesz się przenieść klikając <a id="navigate-to-payu" href="'+e+'">tutaj</a></p>    \n  '}function a(){return'\n    <h2 class="os-step__title error">Płatność została odrzucona</h2>\n    <p>Płatność została odrzucona, ale prawdopodobnie Twoje konto zostało obciążone. W razie wątpliwości prosimy o kontakt.</p>\n  '}function i(){return"\n    <p>Płatność za zamowienie została zakceptowana. Dziękujemy.</p>\n  "}function u(){return'\n    <h2 class="os-step__title error">Płatność została anulowana</h2>\n    <p>Płatność została anulowana, Twoje konto nie zostało obciążone. W razie wątpliwości prosimy o kontakt.</p>\n  '}function s(){return"\n    <p>Płatność wymaga potwierdzenia. W razie wątpliwości prosimy o kontakt.</p>\n  "}function c(){return"\n    <p>Płatność jest w trakcie rozliczenia.</p>\n  "}Object.defineProperty(t,"__esModule",{value:!0}),t.createServerError=n,t.createSomeError=r,t.createCreatedMessage=o,t.createRejectedMessage=a,t.createCompletedMessage=i,t.createCanceledMessage=u,t.createWaitingForConfirmationMessage=s,t.createPendingMessage=c},61:function(e,t,n){!function(t){try{var r=n(1)}catch(o){}e.exports=t(r)}(function(e){var t=function(e,t){var n={},r={"true":!0,"false":!1,"null":null};return e.replace(/\+/g," ").split("&").forEach(function(e){var o,a=e.split("="),i=decodeURIComponent(a[0]),u=n,s=0,c=i.split("]["),p=c.length-1;if(/\[/.test(c[0])&&/\]$/.test(c[p])?(c[p]=c[p].replace(/\]$/,""),c=c.shift().split("[").concat(c),p=c.length-1):p=0,2===a.length)if(o=decodeURIComponent(a[1]),t&&(o=o&&!isNaN(o)&&+o+""===o?+o:"undefined"===o?void 0:void 0!==r[o]?r[o]:o),p)for(;s<=p;s++)i=""===c[s]?u.length:c[s],u=u[i]=s<p?u[i]||(c[s+1]&&isNaN(c[s+1])?{}:[]):o;else"[object Array]"===Object.prototype.toString.call(n[i])?n[i].push(o):{}.hasOwnProperty.call(n,i)?n[i]=[n[i],o]:n[i]=o;else i&&(n[i]=t?void 0:"")}),n};return e&&(e.prototype.deparam=e.deparam=t),t})}});
//# sourceMappingURL=thank-you.bundle.js.map
webpackJsonp([3],{0:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(){var e=m.IS_DEV?"3e0f37899697a97a064efc983b653196":Shopify.checkout.token;(0,w.startOrderFetching)(e).then(a)["catch"](p).then(f)}function a(e){var t=l(e),n=e.checkout_token;e.isPayU!==!1&&(e.isPaymentDone&&e.isPaymentSuccesufl?c():e.isPaymentDone&&!e.isPaymentSuccesufl?s(n):t?i(n):u(n))}function i(e){var t=d(e);Shopify.Checkout.OrderStatus.addContentBox('\n    <h2 class="os-step__title error">Błąd serwera</h2>\n    <p>W trakcie przetwarzania transakcji PayU wystąpił błąd.</p>\n    <p>Kliknij <a href="'+t+'">tutaj</a>, aby spróbować jeszcze raz.</p>\n    <p>Jeśli problem nie ustąpi, skontaktuj się z nami.</p>\n  ')}function u(e){var t=d(e);Shopify.Checkout.OrderStatus.addContentBox('\n    <p>Za chwilę zostaniesz przekierowany na strone PayU gdzię będziesz mógł dokonał opłaty.</p>\n    <p>Jeśli tak się nie stanie, możesz się przenieść klikając <a id="navigate-to-payu" href="'+t+'">tutaj</a></p>    \n  '),(0,h["default"])("#navigate-to-payu").on("click",function(){window.clearTimeout(n)});var n=setTimeout(function(){location.href=t},5e3)}function s(e){var t=d(e);Shopify.Checkout.OrderStatus.addContentBox('\n    <h2 class="os-step__title error">Niepowodzenie</h2>\n    <p>Niestety płatność nie została zaakceptowana. </p>\n    <p>Spróbuj jeszcze raz <a id="navigate-to-payu" href="'+t+'">tutaj</a>, albo skontaktuj się z pomocą.</p>\n  ')}function c(){Shopify.Checkout.OrderStatus.addContentBox("\n    <p>Płatność za zamowienie została zakceptowana. Dziękujemy.</p>\n  ")}function p(e){console.log(e),Shopify.Checkout.OrderStatus.addContentBox('\n    <h2 class="os-step__title error">Błąd serwera</h2>\n    <p class="error">Nie mogliśmy połączyć się z serwerem przez co nie wiemy jaki jest status płatności PayU.\n      Spróbuj za chwilę odświerzyć stronę. Możliwe, że to tylko chwilowe problemy. Jeśli problem nie ustępuje, \n      skontaktuj się z nami.\n    </p>\n  ')}function f(){(0,h["default"])(".page--thank-you .main__content > .section > .section__content").addClass("loaded")}function l(e){var t=location.href.indexOf("?");if(t===-1)return!1;var n=h["default"].deparam(location.href.slice(t+1));if(!n||"true"!==n.error)return!1;var r=parseInt(n.errorNumber);return"number"==typeof r&&!(!e.errors||!e.errors[r])}function d(e){return m.BACKEND_URL+"/order-payu-start/"+e}var y=n(1),h=r(y),m=n(27),k=n(28);n(60);var w=n(47);(window.OrderStatus&&window.OrderStatus.gateway)===k.PAY_U_GATWAY?o():f(),window.processPayUOrder=o},27:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.BACKEND_URL="https://glassify.herokuapp.com",t.IS_DEV=!1},28:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PAY_U_GATWAY="PayU",t.maxAttemptNumber=5,t.getOrderTimeoutBeforeNextAttempt=2500},47:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e){return c["default"].getJSON(p.BACKEND_URL+"/order/"+e).then(function(e){return"string"==typeof e&&(e=JSON.parse(e)),e[0]?new l(e[0]):null})}function i(e){return new Promise(function(t,n){function r(){return o++,o>f.maxAttemptNumber?n():void a(e).then(function(e){e?t(e):setTimeout(function(){return r()},f.getOrderTimeoutBeforeNextAttempt)},function(){setTimeout(function(){return r()},f.getOrderTimeoutBeforeNextAttempt)})}var o=0;r()})}Object.defineProperty(t,"__esModule",{value:!0}),t.Order=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.getOrder=a,t.startOrderFetching=i;var s=n(1),c=r(s),p=n(27),f=n(28),l=t.Order=function(){function e(t){o(this,e),this.checkout_token=null,this.gateway=null,Object.assign(this,t)}return u(e,[{key:"isPayU",get:function(){return this.gateway===f.PAY_U_GATWAY}},{key:"isPaymentDone",get:function(){return this.payU&&void 0!==this.payU.isSuccess}},{key:"isPaymentSuccesufl",get:function(){return this.payU&&this.payU.isSuccess===!0}}]),e}()},60:function(e,t,n){!function(t){try{var r=n(1)}catch(o){}e.exports=t(r)}(function(e){var t=function(e,t){var n={},r={"true":!0,"false":!1,"null":null};return e.replace(/\+/g," ").split("&").forEach(function(e){var o,a=e.split("="),i=decodeURIComponent(a[0]),u=n,s=0,c=i.split("]["),p=c.length-1;if(/\[/.test(c[0])&&/\]$/.test(c[p])?(c[p]=c[p].replace(/\]$/,""),c=c.shift().split("[").concat(c),p=c.length-1):p=0,2===a.length)if(o=decodeURIComponent(a[1]),t&&(o=o&&!isNaN(o)&&+o+""===o?+o:"undefined"===o?void 0:void 0!==r[o]?r[o]:o),p)for(;s<=p;s++)i=""===c[s]?u.length:c[s],u=u[i]=s<p?u[i]||(c[s+1]&&isNaN(c[s+1])?{}:[]):o;else"[object Array]"===Object.prototype.toString.call(n[i])?n[i].push(o):{}.hasOwnProperty.call(n,i)?n[i]=[n[i],o]:n[i]=o;else i&&(n[i]=t?void 0:"")}),n};return e&&(e.prototype.deparam=e.deparam=t),t})}});
//# sourceMappingURL=thank-you.bundle.js.map